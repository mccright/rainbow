name: rainbow
maintainer: Julien Nicoulaud <julien.nicoulaud@gmail.com>
license: GPL3
summary: Easily colorize commands output using patterns.
homepage: https://github.com/nicoulaj/rainbow

commands:
  compile: |
    python3 -m pip install --user '.[build]'
    python3 setup.py build
  install: |
    python3 setup.py install --prefix=/usr --root="${BP_DESTDIR}/" --optimize=1 --skip-build --single-version-externally-managed --install-lib $(python3 -c 'import site; print(site.getsitepackages()[0])')
    install -v -m755 -d "${BP_DESTDIR}/etc/bash_completion.d"
    install -v -m644 build/completion/rainbow "${BP_DESTDIR}/etc/bash_completion.d/"
    install -v -m755 -d "${BP_DESTDIR}/usr/share/zsh/site-functions"
    install -v -m644 build/completion/_rainbow "${BP_DESTDIR}/usr/share/zsh/site-functions/"
    install -v -m755 -d "${BP_DESTDIR}/usr/share/man/man1"
    install -v -m644 build/man/rainbow.1.gz "${pkgdir}/usr/share/man/man1/"
  testinstall: |
    /usr/bin/rainbow --help
    /usr/bin/rainbow --version

packages:
  centos7.7: &dependencies-default
    builddeps:
      - python3
      - python3-pip
      - python3-setuptools
    deps:
      - python3
  centos8.0: *dependencies-default
  debian9: *dependencies-default
  debian10: *dependencies-default
  fedora32: *dependencies-default
  opensuse.tumbleweed: *dependencies-default
  opensuse42.3: *dependencies-default
  opensuse15.1: *dependencies-default
  opensuse15.2: *dependencies-default
  ubuntu18.04: *dependencies-default
  ubuntu20.04: *dependencies-default
